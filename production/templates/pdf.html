<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Categories (PDF)</title>
  <style>
    /* Page & typography */
    @page {
      size: Letter;                 /* or A4 */
      margin: 18mm 16mm 20mm;
      @bottom-center {
        content: "Page " counter(page) " of " counter(pages);
        font-size: 10pt; color:#6b7280;
      }
    }
    body {
      font: 11pt/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial;
      color: #111827;
    }
    h1 { font-size: 20pt; margin: 0 0 8mm; }
    h2 {
      font-size: 14pt; margin: 10mm 0 6px;
      padding-bottom: 4px; border-bottom: 1.5px solid #e5e7eb;
    }

    /* Table layout per section */
    table { width: 100%; border-collapse: separate; border-spacing: 0 6px; }
    thead th {
      text-align: left; font-size: 10pt; color:#6b7280; font-weight: 700;
      padding: 4px 6px; border-bottom: 1px solid #e5e7eb;
    }
    td {
      vertical-align: top; padding: 6px 8px;
      background: #f9fafb; border-radius: 8px;
    }
    .col-date  { width: 22%; white-space: nowrap; font-weight: 700; }
    .col-title { width: auto; }

    /* Links & wrapping */
    a { color:#1d4ed8; text-decoration: none; }
    .url { color:#6b7280; font-size: 9.5pt; word-break: break-all; }

    /* Sublinks */
    ul.sublinks { margin: 6px 0 0 0; padding-left: 14px; }
    ul.sublinks li { margin: 2px 0; break-inside: avoid; }
    ul.sublinks .h { font-weight: 700; color:#374151; }
    ul.sublinks a { color:#1d4ed8; text-decoration: none; }

    /* Pagination friendliness */
    .row { break-inside: avoid; }
    p, .col-title { orphans: 3; widows: 3; }
  </style>
</head>
<body>
  <h1>Newsletter Categories</h1>

  {% for label, items in categories.items() %}
    {% if items and items|length %}
      <h2>{{ label }}</h2>

      <table role="table" aria-label="{{ label }}">
        <thead>
          <tr>
            <th class="col-date">Date</th>
            <th class="col-title">Title</th>
          </tr>
        </thead>
        <tbody>
          {% for a in items %}
            <tr class="row">
              <td class="col-date">{{ a.date | pretty_date(a.tag == 'hearing') }}</td>
              <td class="col-title">
                <div><a href="{{ a.url }}">{{ a.title }}</a></div>
                <div class="url">{{ a.url }}</div>

                {% if a.sublinks and a.sublinks|length %}
                  <ul class="sublinks">
                    {% for sl in a.sublinks %}
                      <li>
                        <span class="h">{{ sl.heading }}:</span>
                        <a href="{{ sl.url }}">{{ sl.url }}</a>
                      </li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
  {% endfor %}

  <div class="muted" style="margin-top:10mm;">
    Generated {{ generated_at.strftime("%Y-%m-%d %H:%M") }}
  </div>
</body>
</html>
